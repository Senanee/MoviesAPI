<h2>movies</h2>
<form [formGroup]="searchForm">
    <div class="row">

        <div class="col-6">
            <input id="filter" type="text" placeholder="Search by Movie title" formControlName="nameFilter" />
        </div>
        <div class="mb-3">
            <select
          class="custom-select mb-3"
          (change)="filterByGenre($event)"
          formControlName="genreFilter"
        >
          <option value="All">Choose Genre</option>
          <option *ngFor="let genre of genreList; let i=index" [value]="genre">
            {{ genre }}
          </option>
        </select>
        </div>
    </div>
</form>


<!-- <ng-container *ngIf="{ movies: input$ | async } as vm">
    <div *ngIf="vm.movies; else loading" class="result-grid">
        <div class="header">
            <div>Title</div>
            <div>Release Date</div>
            <div>Overview</div>
            <div>Popularity</div>
            <div>Genre</div>
            <div>PosterUrl</div>
        </div>
        <ng-container *ngFor="let p of vm.movies">
            <div>{{ p.title }}</div>
            <div>{{ p.releaseDate }}</div>
            <div>{{ p.overview }}</div>
            <div>{{ p.popularity }}</div>
            <div>{{ p.genre }}</div>
            <div>{{ p.posterUrl }}</div>
        </ng-container>
    </div>
    <ng-template #loading>
        <p>Loading...</p>
    </ng-template>
</ng-container> -->

<table mat-table class="lessons-table mat-elevation-z8" [dataSource]="dataSource">

    <ng-container matColumnDef="Title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let movie">{{movie.title}}</td>
    </ng-container>

    <ng-container matColumnDef="Release_Date">
        <th mat-header-cell *matHeaderCellDef>Release_Date</th>
        <td mat-cell class="Release_Date-cell" *matCellDef="let movie">{{movie.releaseDate}}</td>

    </ng-container>

    <ng-container matColumnDef="Overview">
        <th mat-header-cell *matHeaderCellDef>Overview</th>
        <td mat-cell class="overview-cell" *matCellDef="let movie">{{movie.overview}}</td>
    </ng-container>
    <ng-container matColumnDef="Popularity">
        <th mat-header-cell *matHeaderCellDef>Popularity</th>
        <td mat-cell class="Popularity-cell" *matCellDef="let movie">{{movie.popularity}}</td>
    </ng-container>
    <ng-container matColumnDef="Genre">
        <th mat-header-cell *matHeaderCellDef>Genre</th>
        <td mat-cell class="Genre-cell" *matCellDef="let movie">{{movie.genre}}</td>
    </ng-container>
    <ng-container matColumnDef="PosterUrl">
        <th mat-header-cell *matHeaderCellDef>Poster Url</th>
        <td mat-cell class="PosterUrl-cell" *matCellDef="let movie"><img src="{{movie.posterUrl}}" /> </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

</table>
<mat-progress-spinner mode="indeterminate" *ngIf="isLoading"></mat-progress-spinner>
<mat-paginator #paginator [length]="totalData" [pageSize]="pageSize" [pageSizeOptions]="pageSizes" showFirstLastButtons></mat-paginator>